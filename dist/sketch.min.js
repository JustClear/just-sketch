!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define("sketch",i):t.sketch=i()}(this,function(){"use strict";function t(t,i){function e(){++r==t.length&&i(n)}var n=[],r=0;0===(t="object"!=(void 0===t?"undefined":o(t))?[t]:t).length&&i(n),t.map(function(t){var i=new Image;i.src=t,i.crossOrigin="*",i.addEventListener("load",e),i.addEventListener("error",e),n.push(i)})}function i(){if(!(this instanceof i))return new(Function.prototype.bind.apply(i,[null].concat(Array.prototype.slice.call(arguments))));this.init.apply(this,arguments)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function t(t,i){var o=[],e=!0,n=!1,r=void 0;try{for(var a,h=t[Symbol.iterator]();!(e=(a=h.next()).done)&&(o.push(a.value),!i||o.length!==i);e=!0);}catch(t){n=!0,r=t}finally{try{!e&&h.return&&h.return()}finally{if(n)throw r}}return o}return function(i,o){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return i.prototype.init=function(){var t=Array.prototype.slice.call(arguments),i=t[0],o=t[1];"number"==typeof i&&"number"==typeof o&&(this.width=i,this.height=o),this.symbols=[],this.catch=function(){}},i.prototype.initCanvas=function(t,i){return this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=i,this.ctx=this.canvas.getContext("2d"),this.ctx},i.prototype.import=function(t){return"string"==typeof t?this.background=t:console.log(".import(): import unknown type."),this},i.prototype.join=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t?(i.image=t,this.symbols.push(i)):console.log(".join(): join unknown type."),this},i.prototype.rect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.type="rect",this.symbols.push(t),this},i.prototype.export=function(){var o=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return t(this.background,function(r){var a=e(r,1)[0];o.naturalRatio=a.naturalHeight/a.naturalWidth,o.width=o.width||a.naturalWidth,o.height=o.height||a.naturalHeight,o.initCanvas(o.width,o.height),o.ctx.drawImage(a,0,0,o.width,o.width*o.naturalRatio),t(o.symbols.map(function(t){return t.image||""}),function(t){t.map(function(t,i){var e=o.symbols[i],n=e.top,r=void 0===n?0:n,a=e.right,h=void 0===a?0:a,c=e.bottom,d=void 0===c?0:c,s=e.left,u=void 0===s?0:s,l=void 0,p=void 0,y=void 0,f=void 0;e.ratio=t.naturalHeight/t.naturalWidth,e.width&&void 0==e.height?p=(l=e.width)*e.ratio:e.height&&void 0==e.width?l=(p=e.height)/e.ratio:e.width&&e.height?(l=e.width,p=e.height):void 0==e.height&&void 0==e.width?(l=t.naturalWidth,p=t.naturalHeight):console.log("joined symbol size error"),0!==u&&0!==r?(y=u,f=r):0!==u&&0!==d?(y=u,f=o.height-(p+d)):0!==h&&0!==r?(y=o.width-(l+h),f=r):0!==h&&0!==d?(y=o.width-(l+h),f=o.height-(p+d)):console.log("symbol position error: only adjacent sides position are accepted"),l=l||0,p=p||0,y=y||0,f=f||0,"rect"==e.type?(e.backgroundColor&&(o.ctx.fillStyle=e.backgroundColor||"#000",o.ctx.fillRect(y+e.borderWidth,f+e.borderWidth,l,p)),e.borderWidth&&(o.ctx.beginPath(),o.ctx.lineWidth=e.borderWidth,o.ctx.strokeStyle=e.borderColor||"#000",o.ctx.rect(y+e.borderWidth,f+e.borderWidth,l,p),o.ctx.stroke())):o.ctx.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,y,f,l,p)});try{n(o.canvas.toDataURL("image/"+(i.imageType||"jpeg")),o.ctx,o.canvas)}catch(t){setTimeout(function(){return o.catch(t)},0)}})}),this},i});
//# sourceMappingURL=sketch.min.js.map
